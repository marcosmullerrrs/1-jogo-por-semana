import random
import time

# Inicializa os atributos do Dexa
vida_dexa = 10
pistas = 0
turnos = 0  # VariÃ¡vel global que controla o nÃºmero de turnos
pontos_especiais = ["RuÃ­nas do Castelo", "Montanha sem Neve", "Floresta Deserto", "Cachoeira Seca", "Floresta Morta", "Caverna", "Torre do Mago"]

def jogar_dado():
    return random.randint(1, 6)

def batalha_inimigo_comum():
    global vida_dexa, pistas
    vida_inimigo = 3
    print("\nğŸ”¥ VocÃª encontrou um inimigo comum!")

    while vida_inimigo > 0 and vida_dexa > 0:
        acerto = jogar_dado()
        if acerto >= 4:
            vida_inimigo -= 1
            print(f"ğŸ’¥ VocÃª atacou e acertou! Vida do inimigo: {vida_inimigo}")
        else:
            print("ğŸ˜± VocÃª errou o ataque!")

        if vida_inimigo > 0:
            ataque_inimigo = jogar_dado()
            if ataque_inimigo >= 4:
                vida_dexa -= 1
                print(f"âš”ï¸ O inimigo atacou! Sua vida: {vida_dexa}")
            else:
                print("ğŸ‘€ O inimigo errou!")

    if vida_dexa > 0:
        pistas += 1
        vida_dexa += 3
        print(f"\nğŸ‰ VocÃª venceu! +3 de vida e ganhou uma pista ({pistas}/10)\n")
    else:
        print("\nğŸ’€ VocÃª foi derrotado! Fim de jogo.\n")
        return False
    return True

def batalha_inimigo_especial():
    global vida_dexa, pistas
    vida_inimigo = 5
    print("\nğŸ”¥ VocÃª encontrou um inimigo especial no ponto de interesse!")

    while vida_inimigo > 0 and vida_dexa > 0:
        acerto = jogar_dado()
        if acerto >= 4:
            vida_inimigo -= 1
            print(f"ğŸ’¥ VocÃª atacou e acertou! Vida do inimigo: {vida_inimigo}")
        else:
            print("ğŸ˜± VocÃª errou o ataque!")

        if vida_inimigo > 0:
            ataque_inimigo = jogar_dado()
            if ataque_inimigo >= 4:
                vida_dexa -= 1
                print(f"âš”ï¸ O inimigo atacou! Sua vida: {vida_dexa}")
            else:
                print("ğŸ‘€ O inimigo errou!")

    if vida_dexa > 0:
        pistas += 1
        vida_dexa += 3
        print(f"\nğŸ‰ VocÃª venceu o inimigo especial! +3 de vida e ganhou uma pista ({pistas}/10)\n")
    else:
        print("\nğŸ’€ VocÃª foi derrotado! Fim de jogo.\n")
        return False
    return True

# SimulaÃ§Ã£o de um turno
def turno():
    global vida_dexa, turnos
    print(f"\nğŸŒ… Turno {turnos + 1} comeÃ§a...")
    
    d1, d2 = jogar_dado(), jogar_dado()
    
    if d1 % 2 == 0 or d2 % 2 == 0:
        return batalha_inimigo_comum()
    else:
        vida_dexa += 1
        print("ğŸ˜´ Nada aconteceu. VocÃª recupera 1 ponto de vida.")
        return True

# FunÃ§Ã£o para o enredo inicial
def introducao():
    print("Bem-vindo a Terraum!")
    print("\nVocÃª Ã© Dexa, um jovem elfo determinado a derrotar o Mago da Torre, que devastou a natureza do planeta.")
    print("Durante sua jornada, vocÃª enfrentarÃ¡ inimigos e desafios, enquanto tenta coletar pistas sobre o Mago.")
    print("\nPressione 'Enter' para comeÃ§ar sua jornada...")

# FunÃ§Ã£o para a batalha contra o Mago
def batalha_contra_o_mago():
    global vida_dexa
    vida_mago = 10
    print("\nğŸ”¥ VocÃª chegou Ã  Torre do Mago e estÃ¡ prestes a enfrentar o Mago da Torre!")

    while vida_mago > 0 and vida_dexa > 0:
        acerto = jogar_dado()
        if acerto >= 4:
            vida_mago -= 1
            print(f"ğŸ’¥ VocÃª atacou o Mago! Vida do Mago: {vida_mago}")
        else:
            print("ğŸ˜± VocÃª errou o ataque!")

        if vida_mago > 0:
            ataque_mago = jogar_dado()
            if ataque_mago >= 4:
                vida_dexa -= 1
                print(f"âš”ï¸ O Mago atacou! Sua vida: {vida_dexa}")
            else:
                print("ğŸ‘€ O Mago errou!")

    if vida_dexa > 0:
        print("\nğŸ‰ VocÃª derrotou o Mago! Terraum foi salvo e a natureza restaurada.")
        if pistas >= 10:
            print("ğŸ•Šï¸ O Mago foi redimido e sua bondade foi restaurada!")
        else:
            print("âš”ï¸ O Mago foi derrotado sem redenÃ§Ã£o.")
    else:
        print("\nğŸ’€ VocÃª foi derrotado! Fim de jogo.\n")

# FunÃ§Ã£o para iniciar o jogo
def iniciar_jogo():
    global turnos  # Garantir que a variÃ¡vel turnos Ã© global
    introducao()  # Enredo inicial

    time.sleep(1)  # Atraso para dar tempo de o jogador ler a introduÃ§Ã£o

    while vida_dexa > 0 and pistas < 10:
        print("\nPressione 'Enter' para iniciar o prÃ³ximo turno...")
        input()  # Permite a interaÃ§Ã£o para continuar o jogo

        if turnos > 0 and turnos % 5 == 0:
            ponto_especial = random.choice(pontos_especiais)
            print(f"\nğŸŒ VocÃª chegou ao ponto especial: {ponto_especial}")
            batalha_especial = batalha_inimigo_especial()
            if not batalha_especial:
                break  # Se Dexa for derrotado, o jogo termina
        else:
            turno_continuar = turno()

            if not turno_continuar:
                break  # Se Dexa morrer, o jogo termina

        turnos += 1
        print(f"\nğŸŒ™ Dexa dorme. Sua vida atual Ã© {vida_dexa}.")

    if pistas >= 10:
        print("\nğŸ‰ VocÃª coletou 10 pistas! Agora, ao derrotar o Mago, ele serÃ¡ redimido e Terraum serÃ¡ salvo.")
    else:
        print("\nğŸ’€ VocÃª nÃ£o coletou todas as pistas. O Mago serÃ¡ derrotado sem redenÃ§Ã£o.")

    # Luta contra o Mago
    batalha_contra_o_mago()

# Iniciar o jogo
iniciar_jogo()
